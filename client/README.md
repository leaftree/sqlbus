
<center># hisqlbus使用流程图</center>

```txt

                                             -------------------
                                            --                 --
                                          --       BEGING       --
                                            --                 --
                                             -------------------
                                                      |
                                                      v
                                           +----------------------+
                                           | bus = sqlbusCreate() |
                                           +----------+-----------+
                                                      |
                                                      v
                                           +----------------------+
                                           |   bus->ofn->conn()   |
                                           +----------+-----------+
                                                      |
                                        +-------------+--------------+
                                        |             |              |
                                        |             X              |
                                        |            / \             |
                                        |           /   \            |
                                        |          /     \           |
                                        |         /       \          |
                                        |        X (AUTH?) X         |
                                        |         \       /          |
                                        |          \     /           |
                                        |           \   /            |
                                        |            \ /             |
                                        |             X              |
                                        |             |              |
                                        |             v              |
                                        |  +----------------------+  |
                                        |  |   bus->ofn->auth()   |  |
                                        |  +----------+-----------+  |
                                        |             |              |
                                        +-------------+--------------+
                                                      |
                                        +-------------+--------------+
                                        |             |              |
                                        |             v              |
                                        |  +----------------------+  |
                                        |  |   bus->ofn->select() |  |
                                        |  +----------------------+  |
                                        |             |              |
                                        +-------------+--------------+
                                                      |               
                                                      |<--------------------+
                                                      |                     |
                                                      v                     |
                                           +----------------------+         |
                                           |   bus->ofn->send()   |         |
                                           +----------------------+         |
                                                      |                     |
                                                      v                     |
                                        +-------------+--------------+      |
                                        |             |              |      |
                                        |             X              |      |
                                        |            / \             |      |
                                        |           /   \            |      |
                                        |          /     \           |      |
                                        |         /       \          |      |
                                        |        X (SYNC?) X         |      |
                                        |         \       /          |      |
                                        |          \     /           |      |
                                        |           \   /            |      |
                                        |            \ /             |      |
                                        |             X              |      |
                                        |             |              |      |
                                        |             v              |      |
                                        |  +----------------------+  |      |
                                        |  |   bus->ofn->recv()   |  |      |
                                        |  +----------+-----------+  |      |
                                        |             |              |      |
                                        |             v              |      |
                                    NO  |  +----------------------+  |      |
                                 +------+--| bus->rfn->perfect( ) |  |      |
                                 |      |  +----------+-----------+  |      |
                                 |      |             | YES          |      |
                                 |      +-------------+--------------+      |
                                 |                    |                     |
                                 |                    v                     |
                                 |         +----------------------+         |
                                 |         |    Do your biz ...   |         |
                                 |         +----------------------+         |
                                 |                    |                     |
                                 +------------------->|                     |
                                                      |                     |
                                                      v                     |
                                           +----------------------+         |
                                           |   bus->ofn->free()   |         |
                                           +----------------------+         |
                                                      |                     |
                                                      X                     |
                                                     / \                    |
                                                    /   \                   |
                                                   /     \                  |
                                                  /       \       YES       |
                                                 X (NEXT?) X----------------+
                                                  \       /
                                                   \     /
                                                    \   /
                                                     \ /
                                                      X
                                                      | NO
                                                      v
                                           +----------------------+
                                           |   sqlbusFinalize( )  |
                                           +----------------------+
                                                      |
                                                      v
                                             -------------------
                                            --                 --
                                          --       FINISHED     --
                                            --                 --
                                             -------------------

```
